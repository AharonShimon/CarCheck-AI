<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CarCheck AI Pro | Ultimate Edition</title>
    <style>
        :root { 
            --bg-deep: #0b0e14;
            --bg-glass: rgba(21, 26, 37, 0.85);
            --accent: #00f0ff;
            --accent-glow: rgba(0, 240, 255, 0.4);
            --border: rgba(42, 59, 85, 0.6);
            --text-bright: #ffffff;
            --text-dim: #94a3b8;
            --gradient: linear-gradient(135deg, #00f0ff 0%, #007aff 100%);
            --danger: #ff3b3b;
            --success: #00ff94;
        }

        body { 
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif; 
            background-color: var(--bg-deep);
            background-image: radial-gradient(circle at 50% 0%, #1a253a 0%, var(--bg-deep) 80%);
            color: var(--text-bright); margin: 0; direction: rtl; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
        }

        .container { padding: 30px 20px; width: 100%; max-width: 450px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; }

        header { text-align: center; margin-bottom: 35px; width: 100%; }
        header h1 { font-size: 26px; font-weight: 900; letter-spacing: 2px; margin: 0; text-transform: uppercase; }
        header h1 span { color: var(--accent); text-shadow: 0 0 20px var(--accent-glow); }

        /* ×¨×›×™×‘×™× ×›×œ×œ×™×™× */
        .plate-box { background: #ffc400; padding: 4px; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-bottom: 30px; width: 100%; max-width: 320px; }
        .plate-inner { border: 2px solid #000; border-radius: 7px; display: flex; align-items: center; padding: 6px; }
        .plate-input { background: none; border: none; font-size: 38px; font-weight: 900; width: 100%; text-align: center; outline: none; letter-spacing: 4px; font-family: monospace; color: #000; }
        
        .field-group { margin-bottom: 22px; width: 100%; display: flex; flex-direction: column; align-items: center; }
        label { font-size: 11px; font-weight: 700; color: var(--accent); text-transform: uppercase; letter-spacing: 1.2px; margin-bottom: 8px; text-align: center; width: 100%; }
        .selector-trigger { width: 100%; padding: 16px 20px; background: var(--bg-glass); backdrop-filter: blur(10px); border: 1px solid var(--border); border-radius: 12px; color: #fff; font-size: 16px; cursor: pointer; display: flex; justify-content: center; align-items: center; position: relative; }
        .selector-trigger:after { content: 'â–¼'; font-size: 10px; color: var(--accent); position: absolute; left: 20px; }
        .popup-grid { display: none; position: absolute; top: 100%; left: 0; right: 0; background: #111827; border: 1px solid var(--accent); border-radius: 16px; padding: 15px; z-index: 1000; margin-top: 8px; box-shadow: 0 20px 50px rgba(0,0,0,0.9); max-height: 350px; overflow-y: auto; }
        .popup-grid.active { display: block; animation: slideUp 0.25s ease; }
        .grid-layout { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%; }
        .grid-item { padding: 12px 5px; text-align: center; background: #1f2937; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; color: #d1d5db; }
        .grid-item:hover { border: 1px solid var(--accent); color: var(--accent); }
        .btn-main { width: 100%; padding: 18px; border-radius: 12px; border: none; font-size: 17px; font-weight: 800; cursor: pointer; color: white; background: var(--gradient); box-shadow: 0 8px 20px rgba(0, 122, 255, 0.3); margin-top: 10px; text-align: center; }
        .ai-panel { margin-top: 35px; display: none; width: 100%; text-align: center; }
        .ai-card { background: var(--bg-glass); padding: 20px; border-radius: 16px; border-bottom: 4px solid var(--accent); margin-bottom: 15px; }
        @keyframes slideUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

        /* --- ×¢×™×¦×•×‘ ×¦'×§ ×œ×™×¡×˜ ×”×—×“×© --- */
        #screen-check { display: none; width: 100%; flex-direction: column; align-items: center; }
        
        .brand-logo-img { height: 50px; width: auto; display: block; margin: 0 auto 10px auto; filter: drop-shadow(0 0 8px var(--accent-glow)); }
        
        .category-title { 
            color: var(--text-bright); font-size: 16px; font-weight: 600; 
            text-transform: uppercase; letter-spacing: 1.5px; margin: 40px 0 15px 0; 
            width: 100%; text-align: center; position: relative; padding-bottom: 10px;
        }
        .category-title::after {
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 60px; height: 2px; background: var(--gradient); border-radius: 2px;
        }

        .check-item { 
            width: 100%; background: var(--bg-glass); padding: 16px; border-radius: 14px; 
            margin-bottom: 10px; border: 1px solid var(--border); display: flex; 
            justify-content: space-between; align-items: center; box-sizing: border-box;
            transition: border-color 0.3s;
        }
        .check-item:hover { border-color: var(--accent); }

        .cb-custom { width: 24px; height: 24px; border: 2px solid var(--border); border-radius: 6px; cursor: pointer; transition: 0.3s; flex-shrink: 0; }
        .cb-custom.checked { background: var(--danger); border-color: var(--danger); display: flex; align-items: center; justify-content: center; }
        .cb-custom.checked:after { content: 'âœ•'; color: white; font-size: 14px; font-weight: 900; }
        
        .item-text-wrapper { display: flex; align-items: center; gap: 12px; flex-grow: 1; }
        
        /* ×˜×•×œ×˜×™×¤ ×¢×™×’×•×œ ×—×“×©× ×™ */
        .info-badge {
            width: 24px; height: 24px; background: rgba(0, 240, 255, 0.15);
            border: 1px solid var(--accent); border-radius: 50%;
            color: var(--accent); display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 14px; cursor: pointer; position: relative;
        }
        .info-badge::before {
            content: ''; position: absolute; inset: -2px; border-radius: 50%;
            border: 1px solid var(--accent); opacity: 0; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.5); opacity: 0; } }

        .tooltip-box { display: none; width: 100%; background: #1a202c; padding: 15px; border-radius: 10px; font-size: 13px; color: var(--text-dim); margin-top: -5px; margin-bottom: 15px; border: 1px solid var(--accent); line-height: 1.6; text-align: right; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }

        /* ×”×•×“×¢×ª ×›×™×©×œ×•×Ÿ AI ××™×•×©×¨×ª */
        .ai-fail-note { 
            display: none; background: rgba(255, 59, 59, 0.15); border: 1px solid var(--danger);
            padding: 10px 15px; border-radius: 10px; color: var(--danger); font-size: 14px; font-weight: 700;
            margin-top: 10px; flex-direction: row; align-items: center; gap: 10px;
        }

        #loader { display: none; position: fixed; inset: 0; background: var(--bg-deep); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; }
        .orbit { width: 40px; height: 40px; border: 2px solid var(--accent-glow); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s infinite linear; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div id="loader"><div class="orbit"></div></div>

<div id="screen-input" class="container">
    <header><h1>CarCheck <span>AI PRO</span></h1></header>
    <div class="plate-box"><div class="plate-inner"><input id="plate" class="plate-input" type="tel" placeholder="00000000" maxlength="8"></div></div>
    <button class="btn-main" style="background: #1f2937; margin-bottom: 30px;" onclick="superSearch()">ğŸ” ××™×ª×•×¨ ×××©×œ×ª×™ ××”×™×¨</button>

    <div class="field-group"><label>×™×¦×¨×Ÿ</label><div id="brand-trigger" class="selector-trigger" onclick="openPicker('brand')">×‘×—×¨ ×™×¦×¨×Ÿ</div><div id="brand-popup" class="popup-grid"><div id="brand-grid" class="grid-layout"></div></div></div>
    <div class="field-group"><label>×“×’×</label><div id="model-trigger" class="selector-trigger" onclick="openPicker('model')">×‘×—×¨ ×“×’×</div><div id="model-popup" class="popup-grid"><div id="model-grid" class="grid-layout"></div></div></div>
    <div class="field-group"><label>×©× ×”</label><div id="year-trigger" class="selector-trigger" onclick="openPicker('year')">×‘×—×¨ ×©× ×”</div><div id="year-popup" class="popup-grid"><div style="display:flex; justify-content:space-between; margin-bottom:10px; color:var(--accent);"><span onclick="shiftYears(-1)" style="cursor:pointer">â®</span><span id="year-label"></span><span onclick="shiftYears(1)" style="cursor:pointer">â¯</span></div><div id="year-grid" class="grid-layout"></div></div></div>

    <input type="hidden" id="v-brand"><input type="hidden" id="v-model"><input type="hidden" id="v-year">
    <button class="btn-main" onclick="startAI()">ğŸš€ ×”×ª×—×œ ×—×§×™×¨×ª AI</button>
    <button class="btn-main" style="background: transparent; border: 1px solid var(--border); margin-top: 15px; color: var(--text-dim);" onclick="goToChecklist(false)">ğŸ“ ×“×œ×’ ×œ×‘×“×™×§×” ×™×“× ×™×ª</button>
    <div id="ai-panel" class="ai-panel"></div>
</div>

<div id="screen-check" class="container">
    <header>
        <img id="brand-logo" class="brand-logo-img" src="" alt="Logo" style="display:none;">
        <h1 id="check-car-name" style="font-size: 20px; margin: 0;">×‘×“×™×§×ª <span>×¨×›×‘</span></h1>
        <div id="ai-fail-msg" class="ai-fail-note"><span>âš ï¸</span><span>× ×›×©×œ ×—×™×‘×•×¨ AI - ××¦×‘ ×‘×“×™×§×” ×™×“× ×™×ª</span></div>
    </header>
    <div id="checklist-content" style="width: 100%;"></div>
    <button class="btn-main" style="margin-top: 40px; background: var(--success); color: #000;" onclick="showFinalResult()">ğŸ“Š ×¡×™×•× ×•×—×©×‘ ×¦×™×•×Ÿ</button>
</div>

<div id="screen-result" class="container" style="display:none">
    <header><h1>×¦×™×•×Ÿ <span>×¡×•×¤×™</span></h1></header>
    <div id="final-gauge" style="width:150px; height:150px; border-radius:50%; border:8px solid var(--success); display:flex; align-items:center; justify-content:center; font-size:50px; font-weight:900; color:var(--success); margin:30px 0;">0</div>
    <button class="btn-main" onclick="location.reload()">×‘×“×™×§×” ×—×“×©×”</button>
</div>

<script>
const db = { "×××•×“×™": ["A3", "Q3", "Q5"], "×‘.×.×•×•": ["×¡×“×¨×” 3", "X1", "X3", "X5"], "×˜×•×™×•×˜×”": ["×§×•×¨×•×œ×”", "RAV4", "×™××¨×™×¡"], "×™×•× ×“××™": ["×˜×•×¡×•×Ÿ", "××™×•× ×™×§", "i20"], "×××–×“×”": ["3", "6", "CX-3", "CX-5", "CX-30"], "×¡×•×‘××¨×•": ["XV", "×¤×•×¨×¡×˜×¨"], "×¤×•×¨×“": ["×¤×•×§×•×¡", "×§×•×’×”", "××§×¡×¤×œ×•×¨×¨"], "×§×™×”": ["×¤×™×§× ×˜×•", "× ×™×¨×•", "×¡×¤×•×¨×˜××–'"], "×©×‘×¨×•×œ×˜": ["×¡×¤××¨×§", "××§×•×•×™× ×•×§×¡"], "×¡×•×–×•×§×™": ["×¡×•×•×™×¤×˜", "×•×™×˜××¨×”"] };
// ××™×¤×•×™ ×œ×•×’×•××™× (×—×™× ××™)
const brandLogoMap = { "×××–×“×”": "mazda", "×˜×•×™×•×˜×”": "toyota", "×™×•× ×“××™": "hyundai", "×§×™×”": "kia", "×©×‘×¨×•×œ×˜": "chevrolet", "×¡×•×‘××¨×•": "subaru", "×¤×•×¨×“": "ford", "×¡×•×–×•×§×™": "suzuki", "×××•×“×™": "audi", "×‘.×.×•×•": "bmw" };

// ×¨×©×™××ª ×‘×“×™×§×•×ª ××•×¨×—×‘×ª ××”××™× ×˜×¨× ×˜
const checklistItems = {
    "×× ×•×¢ ×•× ×•×–×œ×™× (×§×¨×™×˜×™)": [
        { name: "×¤×ª×— ××™×œ×•×™ ×©××Ÿ ('×˜×—×™× ×”')", tip: "×¤×ª×— ××ª ×¤×§×§ ××™×œ×•×™ ×”×©××Ÿ (×”×¦×”×•×‘). ×—×¤×© ××©×§×¢ ×œ×‘×Ÿ/××¤×•×¨ ('×˜×—×™× ×”'). ×× ×™×© - ×‘×¨×—, ×–×” ×¨××© ×× ×•×¢." },
        { name: "××“×™×“ ×©××Ÿ (××¤×œ×¡ ×•×¦×‘×¢)", tip: "××©×•×š ××“×™×“. ×”×©××Ÿ ×¦×¨×™×š ×œ×”×™×•×ª ×‘×™×Ÿ ×”××™× ×™××•× ×œ××§×¡×™××•×, ×‘×¦×‘×¢ ×—×•×-×–×”×•×‘. ×©××Ÿ ×©×—×•×¨ ×××•×“ ××¢×™×“ ×¢×œ ×”×–× ×—×”." },
        { name: "× ×•×–×œ ×§×™×¨×•×¨ (×‘×•×¢×•×ª/×—×œ×•×“×”)", tip: "×¤×ª×— ××™×›×œ ×¢×™×‘×•×™ (×¨×§ ×›×©×”×× ×•×¢ ×§×¨!). ×”× ×•×–×œ ×—×™×™×‘ ×œ×”×™×•×ª × ×§×™ (×™×¨×•×§/××“×•×). ×—×œ×•×“×” ××• ×‘×•×¢×•×ª ××•×•×™×¨ ×›×©×”×× ×•×¢ ×¢×•×‘×“ = ×¡×›× ×”." },
        { name: "×œ×—×¥ ×‘×¦× ×¨×ª ×§×™×¨×•×¨", tip: "×›×©×”×× ×•×¢ ×—× (×‘×–×”×™×¨×•×ª!), ×œ×—×¥ ×¢×œ ×¦×™× ×•×¨ ×”××™× ×”×¢×œ×™×•×Ÿ. ×× ×”×•× ×§×©×” ×›××• ××‘×Ÿ - ×™×™×ª×›×Ÿ ×œ×—×¥ ×‘×¨××© ×× ×•×¢." },
        { name: "×¨×™×— ×“×œ×§ ×—×¨×™×£", tip: "×”×¨×— ×‘××–×•×¨ ×”×× ×•×¢ ×•×‘××•×©×‘ ×”××—×•×¨×™. ×¨×™×— ×“×œ×§ ×—×–×§ ××¢×™×“ ×¢×œ × ×–×™×œ×” ××¡×•×›× ×ª (× ×¤×•×¥ ×‘×¨×›×‘×™× ×™×©× ×™×)." },
        { name: "×¨×¢×© ×©×¨×©×¨×ª/×¨×¦×•×¢×”", tip: "×‘×”×ª× ×¢×” ×§×¨×”, ×”×§×©×‘ ×œ×¨×¢×© ××ª×›×ª×™ ('×¨×¢×©×Ÿ'). ×× × ×¢×œ× ××—×¨×™ ×“×§×”, ×–×” ××•×ª×—×Ÿ ××• ×©×¨×©×¨×ª ×˜×™×™××™× ×’." }
    ],
    "×’×™×¨, ×©×œ×“×” ×•×¦××™×’×™×": [
        { name: "×©×™×œ×•×‘ ×”×™×œ×•×š (××›×”)", tip: "×‘×¢××™×“×”, ×”×¢×‘×¨ ×-P ×œ-R ×•×œ-D. ×”××¢×‘×¨ ×¦×¨×™×š ×œ×”×™×•×ª ××•×¨×’×© ××š ×—×œ×§, ×œ×œ× ××›×” ×—×–×§×” ××• ×”×©×”×™×™×” ××¨×•×›×”." },
        { name: "××‘×—×Ÿ ××’× ×˜ (×—×•××¨ ×¤×—×—×™×)", tip: "×§×— ××’× ×˜ ×—×œ×©. ×”×¢×‘×¨ ××•×ª×• ×¢×œ ×›× ×¤×™×™× ×•×“×œ×ª×•×ª. ×× ×”×•× ×œ× × ×“×‘×§ ×‘× ×§×•×“×•×ª ××¡×•×™××•×ª - ×™×© ×©× ×—×•××¨ ××™×œ×•×™ (×©×¤×›×˜×œ) ××—×¨×™ ×ª××•× ×”." },
        { name: "×‘×¨×’×™ ×›× ×¤×™×™× ×•××›×¡×” ×× ×•×¢", tip: "×¤×ª×— ××›×¡×” ×× ×•×¢. ×”×¡×ª×›×œ ×¢×œ ×”×‘×¨×’×™× ×”××—×–×™×§×™× ××ª ×”×›× ×¤×™×™×. ×× ×”×¦×‘×¢ ×¢×œ×™×”× ××§×•×œ×£ - ×”× ×¤×•×¨×§×• (×ª××•× ×”)." },
        { name: "×ª××¨×™×š ×¦××™×’×™× (DOT)", tip: "×—×¤×© ×§×•×“ ×‘×Ÿ 4 ×¡×¤×¨×•×ª ×¢×œ ×”×¦××™×’ (×œ×“×•×’××” 2523 = ×©×‘×•×¢ 25 ×©× ×ª 23). ×¦××™×’ ××¢×œ 4 ×©× ×™× ×¤×¡×•×œ." }
    ],
    "×—×©××œ ×•××¢×¨×›×•×ª ×¤× ×™×": [
        { name: "×§×•×¨×•×–×™×” ×¢×œ ×”××¦×‘×¨", tip: "×”×¡×ª×›×œ ×¢×œ ×—×™×‘×•×¨×™ ×”××¦×‘×¨ (×”×§×˜×‘×™×). ××‘×§×” ×œ×‘× ×”/×›×—×•×œ×” ××¢×™×“×” ×¢×œ ×§×•×¨×•×–×™×” ×•×¡×•×£ ×—×™×™ ××¦×‘×¨." },
        { name: "× ×•×¨×ª '×‘×“×•×§ ×× ×•×¢' (Check Engine)", tip: "×”× ×¢ ××ª ×”×¨×›×‘. ×”× ×•×¨×” ×”×›×ª×•××” ×—×™×™×‘×ª ×œ×”×™×›×‘×•×ª. ×× ×”×™× ×“×•×œ×§×ª, ×™×© ×ª×§×œ×” ×¤×¢×™×œ×” (×›××• ×—×™×™×©×Ÿ ×—××¦×Ÿ)." },
        { name: "××–×’×Ÿ - ×§×™×¨×•×¨ ×•×—×™××•×", tip: "×‘×“×•×§ ×’× ×§×™×¨×•×¨ ××§×¡×™××œ×™ ×•×’× ×—×™××•×. ×”×—×œ×¤×ª ×¨×“×™××˜×•×¨ ×—×™××•× ×¤× ×™××™ ×”×™× ×™×§×¨×” ×××•×“." }
    ]
};

let yBase = 2018;

function openPicker(t) { const ps=document.querySelectorAll('.popup-grid'); const tg=document.getElementById(t+'-popup'); const a=tg.classList.contains('active'); ps.forEach(p=>p.classList.remove('active')); if(!a){ tg.classList.add('active'); if(t==='brand')rB(); if(t==='year')rY(); }}
function rB() { const g=document.getElementById('brand-grid'); g.innerHTML=''; Object.keys(db).sort().forEach(b=>{ const i=document.createElement('div'); i.className='grid-item'; i.innerText=b; i.onclick=(e)=>{e.stopPropagation(); document.getElementById('v-brand').value=b; document.getElementById('brand-trigger').innerText=b; document.getElementById('brand-popup').classList.remove('active'); rM(b);}; g.appendChild(i); }); }
function rM(brand) { const g=document.getElementById('model-grid'); g.innerHTML=''; db[brand].forEach(m=>{ const i=document.createElement('div'); i.className='grid-item'; i.innerText=m; i.onclick=(e)=>{e.stopPropagation(); document.getElementById('v-model').value=m; document.getElementById('model-trigger').innerText=m; document.getElementById('model-popup').classList.remove('active');}; g.appendChild(i); }); }
function rY() { const g=document.getElementById('year-grid'); g.innerHTML=''; document.getElementById('year-label').innerText=`${yBase}-${yBase+8}`; for(let i=0; i<9; i++){ const y=yBase+i; const item=document.createElement('div'); item.className='grid-item'; item.innerText=y; item.onclick=(e)=>{e.stopPropagation(); document.getElementById('v-year').value=y; document.getElementById('year-trigger').innerText=y; document.getElementById('year-popup').classList.remove('active');}; g.appendChild(item); } }
function shiftYears(n) { yBase += (n * 9); rY(); }

async function startAI() {
    const b=document.getElementById('v-brand').value; const m=document.getElementById('v-model').value; const y=document.getElementById('v-year').value;
    if(!b||!m||!y) return alert("×‘×—×¨ ×¨×›×‘ ××œ×");
    document.getElementById('loader').style.display='flex';
    try {
        const res=await fetch('/analyze-ai',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({brand:b,model:m,year:y})});
        const data=await res.json();
        if(data.success) {
            const ai=data.aiAnalysis; const p=document.getElementById('ai-panel'); p.style.display='block';
            p.innerHTML=`<div class="ai-card"><h3>×¦×™×•×Ÿ AI</h3><div style="font-size:35px;font-weight:900;color:var(--accent)">${ai.reliability_score}</div></div><div class="ai-card"><h3>ğŸ“Œ ×¡×™×›×•×</h3><p style="font-size:14px;color:var(--text-dim)">${ai.summary}</p></div><button class="btn-main" onclick="goToChecklist(false)" style="background:var(--accent);color:#000;">ğŸ“ ×¢×‘×•×¨ ×œ×‘×“×™×§×” ×¤×™×–×™×ª</button>`;
            window.scrollTo({top:p.offsetTop-50,behavior:'smooth'});
        } else { throw new Error(); }
    } catch(e) { goToChecklist(true); } finally { document.getElementById('loader').style.display='none'; }
}

function goToChecklist(aiFailed) {
    const b = document.getElementById('v-brand').value || "×¨×›×‘"; const m = document.getElementById('v-model').value || "×›×œ×œ×™";
    document.getElementById('screen-input').style.display = 'none'; document.getElementById('screen-check').style.display = 'flex';
    document.getElementById('check-car-name').innerHTML = `${b} <span>${m}</span>`;
    
    const logoImg = document.getElementById('brand-logo');
    if (brandLogoMap[b]) { logoImg.src = `https://cdn.worldvectorlogo.com/logos/${brandLogoMap[b]}.svg`; logoImg.style.display = 'block'; } else { logoImg.style.display = 'none'; }

    const failMsg = document.getElementById('ai-fail-msg');
    failMsg.style.display = aiFailed ? 'flex' : 'none';
    
    const content = document.getElementById('checklist-content'); content.innerHTML = '';
    let i = 0;
    for(let cat in checklistItems) {
        content.innerHTML += `<div class="category-title">${cat}</div>`;
        checklistItems[cat].forEach(item => {
            i++;
            content.innerHTML += `
                <div class="check-item" onclick="toggleCB(${i})">
                    <div class="item-text-wrapper">
                        <div class="info-badge" onclick="event.stopPropagation(); toggleTip(${i})">!</div>
                        <span style="font-size:14px;">${item.name}</span>
                    </div>
                    <div id="cb_${i}" class="cb-custom"></div>
                </div>
                <div id="tip_${i}" class="tooltip-box">${item.tip}</div>
            `;
        });
    }
    window.scrollTo(0,0);
}

function toggleTip(id) { const t=document.getElementById('tip_'+id); t.style.display=(t.style.display==='block')?'none':'block'; }
function toggleCB(id) { document.getElementById('cb_'+id).classList.toggle('checked'); }
function showFinalResult() {
    const t=document.querySelectorAll('.cb-custom').length; const f=document.querySelectorAll('.cb-custom.checked').length;
    const s=Math.max(0, 100-Math.round((f/t)*100));
    document.getElementById('screen-check').style.display='none'; document.getElementById('screen-result').style.display='flex';
    document.getElementById('final-gauge').innerText=s;
}
async function superSearch() { /* ×œ×•×’×™×§×” ×××©×œ×ª×™×ª */ }
</script>
</body>
</html>
