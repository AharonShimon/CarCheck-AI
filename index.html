<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CarCheck AI Pro</title>
    <style>
        :root { --primary: #00F2FF; --bg: #0A0A0C; --card: #16161D; --text: #E0E0E0; --danger: #FF3B3B; --success: #00FF85; --warning: #FFB800; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; direction: rtl; -webkit-tap-highlight-color: transparent; }
        .container { padding: 20px; max-width: 500px; margin: auto; padding-bottom: 90px; }
        
        /* ×œ×•×—×™×ª */
        .plate-container { background: #FFB800; padding: 5px; border-radius: 12px; border: 3px solid #000; display: flex; align-items: center; margin-bottom: 15px; position: relative; box-shadow: 0 4px 15px rgba(255, 184, 0, 0.2); }
        .plate-input { background: none; border: none; font-size: 38px; font-weight: 900; width: 100%; text-align: center; outline: none; letter-spacing: 4px; font-family: monospace; z-index: 2; color: black; }
        .il-tag { background: #003399; color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; position: absolute; left: 8px; font-weight: bold; z-index: 1; }

        /* ×›×¤×ª×•×¨×™× ×•×§×œ×˜×™× */
        /* ×©×™× ×•×™ ×—×©×•×‘: ×¢×™×¦×•×‘ ××—×™×“ ×œ×›×œ ×”×©×“×•×ª ×›×•×œ×œ ×”-INPUT ×”×—×“×© */
        select, input, .btn { width: 100%; padding: 16px; background: var(--card); border: 1px solid #333; color: #fff; border-radius: 14px; margin-bottom: 15px; font-size: 16px; box-sizing: border-box; transition: 0.2s; }
        select:focus, input:focus { border-color: var(--primary); outline: none; }
        
        .btn { background: #007AFF; font-weight: bold; cursor: pointer; border: none; margin-top: 5px; font-size: 18px; }
        .btn-ai { background: linear-gradient(135deg, var(--primary), #7000FF); margin-top: 20px; box-shadow: 0 4px 20px rgba(0, 242, 255, 0.2); }
        .btn-finish { background: var(--success); color: #000; margin-top: 30px; font-weight: 800; }

        #status-msg { text-align: center; font-weight: bold; min-height: 20px; margin-bottom: 10px; font-size: 14px; }
        #ai-result { display: none; background: rgba(0, 242, 255, 0.1); border: 1px solid var(--primary); padding: 15px; border-radius: 12px; margin-top: 20px; line-height: 1.6; font-size: 15px; }

        /* ×¦'×§ ×œ×™×¡×˜ */
        .category { margin-top: 30px; color: var(--primary); font-size: 18px; font-weight: 800; border-bottom: 2px solid #222; padding-bottom: 8px; }
        .check-item { background: var(--card); padding: 15px; border-radius: 12px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center; }
        .item-left { display: flex; align-items: center; flex-grow: 1; cursor: pointer; }
        .cb { width: 24px; height: 24px; border: 2px solid #555; border-radius: 6px; margin-left: 15px; flex-shrink: 0; transition: 0.2s; }
        .cb.checked { background: var(--danger); border-color: var(--danger); display: flex; align-items: center; justify-content: center; }
        .cb.checked::after { content: "âœ•"; color: white; font-weight: bold; }
        .info-btn { width: 30px; height: 30px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); font-weight: bold; cursor: pointer; }
        .tooltip { display: none; background: #222; padding: 12px; border-radius: 8px; font-size: 13px; color: #ccc; margin-top: 5px; border: 1px solid #444; line-height: 1.4; }

        #score-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.96); z-index: 2000; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 25px; }
        .score-circle { width: 140px; height: 140px; border-radius: 50%; border: 8px solid var(--success); display: flex; align-items: center; justify-content: center; font-size: 50px; font-weight: 900; color: var(--success); margin-bottom: 25px; box-shadow: 0 0 30px rgba(0, 255, 133, 0.2); }

        #loader { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .spinner { width: 50px; height: 50px; border: 4px solid #333; border-top-color: var(--primary); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div id="loader"><div class="spinner"></div><p id="loader-text" style="color:white; margin-top:15px; font-weight:bold;">×˜×•×¢×Ÿ...</p></div>

<div id="screen-input" class="container">
    <h1 style="text-align:center;">CarCheck <span style="color:var(--primary)">AI</span></h1>
    
    <div class="plate-container">
        <div class="il-tag"><span>IL</span></div>
        <input id="plate" class="plate-input" type="tel" placeholder="12345678" maxlength="8">
    </div>
    
    <button class="btn" onclick="superSearch()">ğŸ” ××™×ª×•×¨ ×¨×›×‘ (×¢×•×§×£ ×—×¡×™××•×ª)</button>
    <div id="status-msg"></div>

    <div style="margin-top:20px; border-top:1px solid #333; padding-top:20px;">
        <label style="color:#888; margin-bottom:5px; display:block;">×™×¦×¨×Ÿ:</label>
        <select id="brand" onchange="updateModels()"><option value="">×‘×—×¨ ×™×¦×¨×Ÿ...</option></select>
        
        <label style="color:#888; margin-bottom:5px; display:block;">×“×’×:</label>
        <input id="model" list="model-list" placeholder="×‘×—×¨ ××”×¨×©×™××” ××• ×”×§×œ×“..." disabled>
        <datalist id="model-list"></datalist>
        
        <label style="color:#888; margin-bottom:5px; display:block;">×©× ×”:</label>
        <input id="year" type="number" placeholder="×œ××©×œ: 2021">
        
        <button class="btn btn-ai" onclick="analyzeAI()">ğŸ¤– × ×ª×— ×××™× ×•×ª ×•×”××©×š</button>
    </div>

    <div id="ai-result"></div>
</div>

<div id="screen-check" class="container" style="display:none">
    <h2 id="check-header" style="text-align:center;"></h2>
    <div id="checklist-content"></div>
    <button class="btn btn-finish" onclick="calculateScore()">ğŸ“Š ×©×§×œ×œ ×¦×™×•×Ÿ ×¡×•×¤×™</button>
    <button class="btn" style="background:transparent; color:#666;" onclick="location.reload()">×™×¦×™××”</button>
</div>

<div id="score-overlay">
    <div class="score-circle" id="final-score">0</div>
    <h2 id="score-msg" style="color:white;"></h2>
    <p id="score-desc" style="color:#aaa; max-width:300px; margin-bottom:30px; line-height:1.5;"></p>
    <button class="btn" style="background:#25D366; color:white;" onclick="shareResult()">×©×ª×£ ×‘×•×•××˜×¡××¤ ğŸŸ¢</button>
    <button class="btn" style="background:#333; margin-top:15px;" onclick="location.reload()">×‘×“×™×§×” ×—×“×©×”</button>
</div>

<script>
// --- ××¡×“ × ×ª×•× ×™× ---
const carDatabase = {
    "×˜×•×™×•×˜×”": ["×§×•×¨×•×œ×”", "×™××¨×™×¡", "RAV4", "C-HR", "×œ× ×“ ×§×¨×•×–×¨", "××™×™×’×•", "×”×™×™×œ×§×¡", "×¤×¨×™×•×¡"],
    "×™×•× ×“××™": ["i10", "i20", "i30", "××™×•× ×™×§", "×˜×•×¡×•×Ÿ", "×¡× ×˜×” ×¤×”", "×§×•× ×”", "××œ× ×˜×¨×”", "×•× ×™×•"],
    "×§×™×”": ["×¤×™×§× ×˜×•", "×¨×™×•", "×¤×•×¨×˜×”", "×¡×¤×•×¨×˜××–'", "× ×™×¨×•", "×¡×˜×•× ×™×§", "×¡×•×¨× ×˜×•", "EV6"],
    "×××–×“×”": ["2", "3", "6", "CX-3", "CX-5", "CX-30"],
    "××™×¦×•×‘×™×©×™": ["×××•×˜×œ× ×“×¨", "ASX", "×¡×¤×™×™×¡ ×¡×˜××¨"],
    "× ×™×¡××Ÿ": ["××™×§×¨×”", "×’'×•×§", "×§×©×§××™", "××§×¡-×˜×¨×™×™×œ"],
    "×¡×•×–×•×§×™": ["×¡×•×•×™×¤×˜", "×•×™×˜××¨×”", "×§×¨×•×¡××•×‘×¨", "×’'×™×× ×™", "××™×’× ×™×¡"],
    "×¡×§×•×“×”": ["××•×§×˜×‘×™×”", "×¡×•×¤×¨×‘", "×§×××™×§", "×§××¨×•×§", "×§×•×“×™××§", "×¤××‘×™×”"],
    "×¡×™××˜": ["××™×‘×™×–×”", "×œ××•×Ÿ", "××¨×•× ×”", "××˜×§×”"],
    "×©×‘×¨×•×œ×˜": ["×¡×¤××¨×§", "×××œ×™×‘×•", "×˜×¨××§×¡"],
    "×”×•× ×“×”": ["×¡×™×•×•×™×§", "×’'××–", "CR-V", "HR-V"],
    "×¤×™×’'×•": ["208", "2008", "3008", "5008"],
    "×¨× ×•": ["×§×œ×™××•", "×§×¤×¦'×•×¨", "××’××Ÿ", "×’×¨× ×“ ×§×•×¤×”"],
    "×××•×“×™": ["A1", "A3", "A4", "A6", "Q3", "Q5"],
    "BMW": ["×¡×“×¨×” 1", "×¡×“×¨×” 3", "X1", "X3", "X5"],
    "×˜×¡×œ×”": ["××•×“×œ 3", "××•×“×œ Y"],
    "BYD": ["Atto 3", "Han", "Dolphin"],
    "×’'×™×œ×™": ["Geometry C"],
    "××•×¤×œ": ["×§×•×¨×¡×”", "××¡×˜×¨×”", "××•×§×”"],
    "×•×•×œ×•×•": ["XC40", "XC60", "S60"],
    "MG": ["ZS", "EHS", "MG4"]
};

// ×˜×§×¡×˜×™× ×œ×’×™×‘×•×™
const backupAI = {
    "×˜×•×™×•×˜×”": "×××™× ×•×ª ××•×¤×ª×™×ª. ×‘×“×•×§ ×”×™×¡×˜×•×¨×™×™×ª ×˜×™×¤×•×œ×™× ×•××¦×‘ ×¡×•×œ×œ×” ×‘×“×’××™× ×”×™×‘×¨×™×“×™×™×.",
    "×”×•× ×“×”": "×××™×Ÿ ×××•×“. ×©×™× ×œ×‘ ×œ×ª×•×©×‘×•×ª ×× ×•×¢ ×•×’×™×¨, ×•×œ××¢×¨×›×ª ×”××™×–×•×’.",
    "×™×•× ×“××™": "×¡×•×¡ ×¢×‘×•×“×”. ×‘×“×•×§ ××¦×‘ ×’×™×¨ ×¨×•×‘×•×˜×™ ×•××¢×¨×›×ª ×”×™×’×•×™ (×§×•×¤×œ×•× ×’).",
    "×§×™×”": "×××™× ×•×ª ×’×‘×•×”×”. ×‘×“×•×§ ×—×™×™×©× ×™ ×—××¦×Ÿ ×•×¨×¢×©×™× ××”×¤×œ×¡×˜×™×§×”.",
    "×××–×“×”": "××”× ×” ×•×××™×Ÿ. ×‘×“×•×§ ×ª×•×©×‘×•×ª ×‘×•×œ××™× ×•××¡×š ××•×œ×˜×™××“×™×”.",
    "× ×™×¡××Ÿ": "×‘×“×•×§ ×”×™×˜×‘ ××ª ×”×’×™×¨ ×”×¨×¦×™×£ (× ×§×•×“×ª ×ª×•×¨×¤×”) ×•××¢×¨×›×ª ×”×§×™×¨×•×¨.",
    "××™×¦×•×‘×™×©×™": "×××™×Ÿ ××š ×¤×©×•×˜. ×‘×“×•×§ ×‘×•×œ××™× ×•×××™×¨ ×§×˜×œ×™×˜×™.",
    "×¡×•×–×•×§×™": "×¤×©×•×˜ ×•×××™×Ÿ. ×‘×“×•×§ ×—×œ×•×“×” ×•××¡×¨×§ ×”×’×”.",
    "×¡×§×•×“×”": "× ×•×— ×•×—×¡×›×•× ×™. ×—×•×‘×” ×œ×‘×“×•×§ ×’×™×¨ DSG ×•××©××‘×ª ××™×.",
    "×¡×™××˜": "×–×¨×™×–. ×‘×“×•×§ ×’×™×¨ DSG, ×ª×¨××•×¡×˜×˜ ×•××©××‘×ª ××™×.",
    "×¤×™×’'×•": "× ×•×—×•×ª ××¢×•×œ×”. ×‘×“×•×§ ×¨×¦×•×¢×ª ×˜×™×™××™× ×’ (×‘×“×’××™ 1.2) ×•××¢×¨×›×ª ××•×¨×™××”.",
    "×¨× ×•": "×‘×˜×™×—×•×ª×™. ×‘×“×•×§ ×’×™×¨ ×•××¢×¨×›×ª ×—×©××œ.",
    "×©×‘×¨×•×œ×˜": "×× ×•×¢×™× ×—×–×§×™×. ×‘×“×•×§ ××¢×¨×›×ª ×§×™×¨×•×¨ (×¡×“×§×™× ×‘××™×›×œ ×¢×•×“×¤×™×).",
    "BMW": "×”× ××” ×× ×”×™×’×”. ×‘×“×•×§ × ×–×™×œ×•×ª ×©××Ÿ, ××¢×¨×›×ª ×§×™×¨×•×¨ ×•×—×©××œ.",
    "×˜×¡×œ×”": "×—×–×§ ×•×˜×›× ×•×œ×•×’×™. ×‘×“×•×§ ×¦××™×’×™×, ×‘×•×œ××™× ×•××™×›×•×ª ×”×¨×›×‘×”.",
    "BYD": "×—×©××œ×™ ×¤×•×¤×•×œ×¨×™. ×‘×“×•×§ ×’×¨×¡×ª ×ª×•×›× ×” ×•××¦×‘ ×¦××™×’×™×.",
    "default": "×“×’× ×–×” × ×—×©×‘ ×¡×‘×™×¨. ××•××œ×¥ ×œ×‘×¦×¢ ×‘×“×™×§×” ×™×¡×•×“×™×ª ×‘××•×¡×š."
};

const checklistData = {
    "×× ×•×¢": [{name:"××¤×œ×¡ ×©××Ÿ", tip:"×‘×“×•×§ ×‘××“×™×“. ×©×—×•×¨ ×–×” ×ª×§×™×Ÿ. '×˜×—×™× ×”' = ××™× ×‘×©××Ÿ."}, {name:"× ×•×–×œ ×§×™×¨×•×¨", tip:"×‘×“×•×§ ×‘××™×›×œ ×¤×œ×¡×˜×™×§ (×× ×•×¢ ×§×¨). ×¦×‘×¢×•× ×™ ×•×œ× ×—×œ×•×“×”."}, {name:"× ×–×™×œ×•×ª", tip:"×¨×˜×™×‘×•×ª ×¡×‘×™×‘ ×”×× ×•×¢/×’×™×¨."}],
    "××¨×›×‘": [{name:"×”×¤×¨×©×™ ×¦×‘×¢", tip:"×“×œ×ª ×›×”×” ×™×•×ª×¨ ××›× ×£ = ×ª××•× ×”."}, {name:"×¦××™×’×™×", tip:"×œ×œ× ×™×•×‘×©/×¡×“×§×™×. ×ª××¨×™×š ×¢×“ 4 ×©× ×™×."}, {name:"×¤× ×¡×™×", tip:"×œ× ×¢×›×•×¨×™× ××• ×©×‘×•×¨×™×."}],
    "×—×©××œ": [{name:"××–×’×Ÿ", tip:"××§×¤×™× ×ª×•×š ×“×§×”?"}, {name:"×—×œ×•× ×•×ª", tip:"×¢×•×œ×™×/×™×•×¨×“×™× ×—×œ×§?"}, {name:"× ×•×¨×•×ª ×œ×•×— ×©×¢×•× ×™×", tip:"× ×“×œ×§×•×ª ×‘×¡×•×•×™×¥ ×•× ×›×‘×•×ª ×‘×”× ×¢×”."}]
};

// ××ª×—×•×œ
const brandSel = document.getElementById('brand');
Object.keys(carDatabase).sort().forEach(b => brandSel.innerHTML += `<option value="${b}">${b}</option>`);

function updateModels() {
    const b = brandSel.value;
    const mInput = document.getElementById('model');
    const dList = document.getElementById('model-list');
    
    // × ×™×§×•×™ ×”×¨×©×™××”
    dList.innerHTML = '';
    mInput.value = '';

    if(b && carDatabase[b]) {
        mInput.disabled = false;
        // ×”×•×¡×¤×ª ×”××•×¤×¦×™×•×ª ×œ×¨×©×™××”
        carDatabase[b].forEach(m => {
            const opt = document.createElement('option');
            opt.value = m;
            dList.appendChild(opt);
        });
    } else {
        mInput.disabled = true;
    }
}

// ×—×™×¤×•×© ×—×›× (Proxy)
async function superSearch() {
    let p = document.getElementById('plate').value.replace(/\D/g,'');
    if(p.length < 7) return showMsg("××¡×¤×¨ ×œ× ×ª×§×™×Ÿ", "#FFB800");
    
    showLoader("××—×¤×© ×‘-3 ×××’×¨×™×...");
    showMsg("", "white");
    
    const resourceId = "053ad243-5e8b-4334-8397-47883b740881";
    const filter = JSON.stringify({ "mispar_rechev": p });
    
    const directUrl = `https://data.gov.il/api/3/action/datastore_search?resource_id=${resourceId}&filters=${filter}`;
    const proxyUrl = `https://corsproxy.io/?` + encodeURIComponent(directUrl);

    try {
        let res = await fetch(directUrl).catch(() => null);
        let data = res ? await res.json() : null;

        if (!data || !data.success) {
            console.log("Direct failed, using proxy...");
            res = await fetch(proxyUrl);
            data = await res.json();
        }

        if (data.success && data.result.records.length > 0) {
            fillData(data.result.records[0]);
        } else {
            showMsg("âŒ ×¨×›×‘ ×œ× × ××¦×. ×”×–×Ÿ ×™×“× ×™×ª.", "#FF3B3B");
        }
    } catch(e) {
        showMsg("âš ï¸ ×‘×¢×™×™×ª ×ª×§×©×•×¨×ª. ×”×–×Ÿ ×™×“× ×™×ª.", "#FF3B3B");
    } finally {
        hideLoader();
    }
}

function fillData(c) {
    document.getElementById('year').value = c.shnat_yitzur || c.SHNAT_YITZUR || "";
    const rawBrand = c.tozeret_nm || c.TOZERET_NM || "";
    const rawModel = c.kinuy_mishari || c.KINUY_MISHARI || ""; // × ×™×¡×™×•×Ÿ ×œ××©×•×š ×“×’×

    let matched = false;
    for(let opt of brandSel.options) {
        if(rawBrand.includes(opt.value)) {
            brandSel.value = opt.value;
            updateModels(); // ××¢×“×›×Ÿ ××ª ×”×“×¨×•×¤-×œ×™×¡×˜
            matched = true;
            break;
        }
    }
    
    // ××™×œ×•×™ ××•×˜×•××˜×™ ×©×œ ×”×“×’× (×× ×™×©)
    if(rawModel) {
        document.getElementById('model').value = rawModel;
    }

    if(matched) showMsg("âœ… ×¨×›×‘ ××•×ª×¨!", "#00FF85");
    else showMsg(`× ××¦×: ${rawBrand}. ×‘×—×¨ ×™×¦×¨×Ÿ.`, "orange");
}

async function analyzeAI() {
    const b = brandSel.value, m = document.getElementById('model').value, y = document.getElementById('year').value;
    if(!b || !m) return alert("×× × ××œ× ×™×¦×¨×Ÿ ×•×“×’×");

    showLoader("×× ×ª×— × ×ª×•× ×™×...");
    
    try {
        const res = await fetch('/analyze-ai', {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({brand:b, model:m, year:y})
        });
        const data = await res.json();
        
        if(data.success) {
            showAIResult(data.aiAnalysis);
        } else {
            generateOfflineReport(b, m, y);
        }
    } catch(e) {
        generateOfflineReport(b, m, y);
    } finally {
        hideLoader();
    }
}

function generateOfflineReport(brand, model, year) {
    const baseText = backupAI[brand] || backupAI["default"];
    const text = `<strong>×“×•×— ×××™× ×•×ª (×××’×¨ ××§×•××™):</strong><br>
    ×¢×‘×•×¨ ${brand} ${model} (${year}):<br>
    â­ <strong>×××™× ×•×ª:</strong> ${baseText}<br>
    âš ï¸ <strong>×©×™× ×œ×‘:</strong> ×–×”×• ×“×•×— ××•×˜×•××˜×™ ×¢×§×‘ ×¢×•××¡ ×‘×©×¨×ª×™ ×”-AI.`;
    showAIResult(text);
}

function showAIResult(htmlContent) {
    const resDiv = document.getElementById('ai-result');
    resDiv.innerHTML = htmlContent;
    resDiv.style.display = 'block';
    
    if(!document.getElementById('cont-btn')) {
        const btn = document.createElement('button');
        btn.id = 'cont-btn';
        btn.className = 'btn';
        btn.innerText = '×”××©×š ×œ×¦\'×§ ×œ×™×¡×˜ â”';
        btn.style.marginTop = '15px';
        btn.onclick = goToCheck;
        document.getElementById('screen-input').appendChild(btn);
    }
}

function goToCheck() {
    document.getElementById('screen-input').style.display = 'none';
    document.getElementById('screen-check').style.display = 'block';
    document.getElementById('check-header').innerText = `${brandSel.value} ${document.getElementById('model').value}`;
    renderList();
}

function renderList() {
    let h = "", i=0;
    const aiText = document.getElementById('ai-result').innerHTML;
    if(aiText) h += `<div style="font-size:14px; margin-bottom:20px; padding:10px; border:1px solid var(--primary); border-radius:10px;">${aiText}</div>`;

    for(let cat in checklistData) {
        h += `<div class="category">${cat}</div>`;
        checklistData[cat].forEach(item => {
            i++;
            h += `<div class="check-item">
                <div class="item-left" onclick="toggleCB(${i})"><div class="cb" id="cb_${i}"></div><span>${item.name}</span></div>
                <div class="info-btn" onclick="toggleTip(${i})">?</div>
            </div><div class="tooltip" id="tip_${i}">${item.tip}</div>`;
        });
    }
    document.getElementById('checklist-content').innerHTML = h;
}

function toggleCB(id) { document.getElementById('cb_'+id).classList.toggle('checked'); }
function toggleTip(id) { const el = document.getElementById('tip_'+id); el.style.display = el.style.display==='block'?'none':'block'; }

function calculateScore() {
    const total = document.querySelectorAll('.cb').length;
    const checked = document.querySelectorAll('.cb.checked').length;
    const score = Math.max(0, 100 - Math.round((checked/total)*100));
    
    document.getElementById('final-score').innerText = score;
    const msg = document.getElementById('score-msg');
    
    if(score > 80) msg.innerText = "××•××œ×¥ âœ…";
    else if(score > 60) msg.innerText = "×œ×‘×“×•×§ âš ï¸";
    else msg.innerText = "×œ× ××•××œ×¥ âŒ";
    
    document.getElementById('score-overlay').style.display = 'flex';
}

function shareResult() {
    const txt = `×‘×“×™×§×ª ×¨×›×‘: ${document.getElementById('check-header').innerText}\n×¦×™×•×Ÿ: ${document.getElementById('final-score').innerText}\n×¡×˜×˜×•×¡: ${document.getElementById('score-msg').innerText}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(txt)}`);
}

function showLoader(txt) { document.getElementById('loader-text').innerText = txt; document.getElementById('loader').style.display = 'flex'; }
function hideLoader() { document.getElementById('loader').style.display = 'none'; }
function showMsg(txt, col) { const el = document.getElementById('status-msg'); el.innerText = txt; el.style.color = col; }
</script>
</body>
</html>
