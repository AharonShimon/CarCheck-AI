<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CarCheck AI Pro</title>

<style>
:root{
--primary:#00F2FF;
--bg:#0A0A0C;
--card:#16161D;
--danger:#FF3B3B;
--success:#00FF85;
--warning:#FFB800;
--text:#fff;
}
body{margin:0;background:var(--bg);color:var(--text);font-family:Arial}
.container{max-width:500px;margin:auto;padding:20px}
input,button{width:100%;padding:14px;border-radius:12px;border:none}
button{background:linear-gradient(135deg,#00F2FF,#7000FF);color:#fff;font-size:16px;font-weight:bold}
.card{background:var(--card);padding:16px;border-radius:16px;margin-top:15px}
.hidden{display:none}
.star{color:#FFD700;font-size:22px}
.issue{margin-top:5px}
.item{display:flex;justify-content:space-between;padding:12px;background:#222;border-radius:10px;margin-top:8px}
.status-btn{padding:6px 10px;border-radius:8px;font-size:12px}
.ok{background:var(--success)}
.fail{background:var(--warning)}
.critical{background:var(--danger)}
</style>
</head>

<body>

<div class="container">

<h2 style="text-align:center">ğŸš— CarCheck AI Pro</h2>

<input id="plate" placeholder="××¡×¤×¨ ×¨×™×©×•×™">
<input id="brand" placeholder="×™×¦×¨×Ÿ">
<input id="model" placeholder="×“×’×">
<input id="year" placeholder="×©× ×”">

<button onclick="analyze()">× ×ª×— ×¨×›×‘</button>

<div id="aiCard" class="card hidden">
<h3>ğŸ” × ×™×ª×•×— AI</h3>
<div id="stars"></div>
<div id="issues"></div>
<p id="summary"></p>
</div>

<div id="checklist" class="hidden"></div>

<button id="pdfBtn" class="hidden" onclick="window.print()">×©××•×¨ PDF</button>

</div>

<script>

const checklistItems = [
 {id:1,title:"× ×–×™×œ×•×ª ×©××Ÿ",severity:"critical"},
 {id:2,title:"×¨×¢×™×“×•×ª ×× ×•×¢",severity:"critical"},
 {id:3,title:"×‘×œ××™×",severity:"normal"},
 {id:4,title:"×¦××™×’×™×",severity:"normal"},
 {id:5,title:"××–×’×Ÿ",severity:"normal"}
];

async function analyze(){
const plate=document.getElementById("plate").value;
const brand=document.getElementById("brand").value;
const model=document.getElementById("model").value;
const year=document.getElementById("year").value;

const res=await fetch("/analyze-car",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({plate,brand,model,year})
});

const data=await res.json();
renderAI(data.aiAnalysis);
renderChecklist();
}

function renderAI(ai){
document.getElementById("aiCard").classList.remove("hidden");

let stars="";
for(let i=0;i<ai.rating;i++){stars+="â­";}
document.getElementById("stars").innerHTML=stars;

let issues="";
ai.issues.forEach(i=>{
issues+=`<div class="issue">âš  ${i}</div>`;
});
document.getElementById("issues").innerHTML=issues;

document.getElementById("summary").innerText=ai.summary;
}

function renderChecklist(){
const wrap=document.getElementById("checklist");
wrap.classList.remove("hidden");
let html="<h3>ğŸ›  ×‘×“×™×§×” ×¤×™×–×™×ª</h3>";

checklistItems.forEach(i=>{
html+=`
<div class="item">
${i.title}
<div>
<button class="status-btn ok" onclick="setStatus(this,'ok')">×ª×§×™×Ÿ</button>
<button class="status-btn fail" onclick="setStatus(this,'fail')">×œ×™×§×•×™</button>
<button class="status-btn critical" onclick="setStatus(this,'critical')">×—××•×¨</button>
</div>
</div>`;
});

wrap.innerHTML=html;
document.getElementById("pdfBtn").classList.remove("hidden");
}

function setStatus(btn,status){
const parent=btn.parentElement;
[...parent.children].forEach(b=>b.style.opacity="0.3");
btn.style.opacity="1";
}

</script>

</body>
</html>
