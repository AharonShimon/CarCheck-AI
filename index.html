<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CarCheck AI Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <div id="loader-text" style="margin-top:20px; color:var(--accent); font-weight:bold;">🤖 המוסכניק חושב...</div>
    </div>

    <div id="screen-input" class="container">
        <header>
            <h1>🚗 CarCheck <span>PRO</span></h1>
        </header>
        
        <div class="plate-box">
            <div class="plate-inner">
                <input id="license-plate" class="plate-input" type="tel" placeholder="00000000" maxlength="8">
            </div>
        </div>
        
        <div class="field-group">
            <label>1. יצרן</label>
            <div id="brand-trigger" class="selector-trigger"><span>בחר יצרן...</span> <span>▼</span></div>
            <div id="brand-popup" class="popup-grid">
                <input type="text" id="brand-search" class="search-input" placeholder="חפש...">
                <div id="brand-grid" class="grid-layout"></div>
            </div>
            <input type="hidden" id="val-b">
        </div>

        <div class="field-group">
            <label>2. דגם</label>
            <div id="model-trigger" class="selector-trigger disabled"><span>בחר דגם...</span> <span>▼</span></div>
            <div id="model-popup" class="popup-grid">
                <input type="text" id="model-search" class="search-input" placeholder="חפש...">
                <div id="model-grid" class="grid-layout"></div>
            </div>
            <input type="hidden" id="val-m">
        </div>

        <div class="field-group">
            <label>3. שנה</label>
            <div id="year-trigger" class="selector-trigger disabled"><span>בחר שנה...</span> <span>▼</span></div>
            <div id="year-popup" class="popup-grid">
                <div id="year-grid" class="grid-layout"></div>
            </div>
            <input type="hidden" id="val-y">
        </div>

       <div class="field-group">
            <label>4. מנוע</label>
            <div id="engine-trigger" class="selector-trigger disabled"><span>🔌 בחר מנוע...</span> <span>▼</span></div>
            <div id="engine-popup" class="popup-grid">
                <input type="text" id="engine-search" class="search-input" placeholder="חפש מנוע...">
                <div id="engine-grid" class="grid-layout"></div>
            </div>
            <input type="hidden" id="val-e">
        </div>

        <div class="field-group">
            <label>5. גימור</label>
            <div id="trim-trigger" class="selector-trigger disabled"><span>✨ בחר גימור...</span> <span>▼</span></div>
            <div id="trim-popup" class="popup-grid">
                <input type="text" id="trim-search" class="search-input" placeholder="חפש גימור...">
                <div id="trim-grid" class="grid-layout"></div>
            </div>
            <input type="hidden" id="val-t">
        </div>

        <button id="btn-ai" class="btn-main" disabled>🚀 נתח ב-AI</button>
        
        <div id="ai-panel" class="task-card" style="display: none; margin-top: 20px; border: 1px solid var(--accent);">
            <div class="ai-header" style="font-weight: 800; color: var(--accent); margin-bottom: 10px;">🤖 חוות דעת AI:</div>
            <div id="ai-content"></div>
            <button id="btn-continue-ai" class="btn-main" style="margin-top:15px; background: var(--success);">המשך לבדיקת שטח 🏁</button>
        </div>

        <button id="btn-skip" class="btn-outline">📋 דלג ישר לבדיקה</button>
    </div>

    <div id="screen-check" class="container" style="display:none;">
        <header>
            <h1>📋 בדיקת <span>שטח</span></h1>
        </header>
        <div id="checklist-content"></div>
    </div>

    <div id="screen-result" class="container" style="display:none;">
        <header>
            <h1>🏆 סיכום <span>בדיקה</span></h1>
        </header>
        
        <div id="final-gauge" class="final-gauge">0</div>
        <h2 id="result-status" style="text-align:center; margin-bottom: 20px;"></h2>
        
        <div id="defects-container" class="task-card" style="display:none; background: rgba(239, 68, 68, 0.05);">
            <h3 style="color:var(--danger); margin:0 0 10px 0;">⚠️ רשימת ריג'קטים:</h3>
            <ul id="defects-ul" style="list-style: none; padding: 0;"></ul>
            
            <div style="margin-top:20px; border-top:1px solid rgba(255,255,255,0.1); padding-top:15px; font-weight:900; font-size:20px; display:flex; justify-content:space-between;">
                <span>סה"כ ליישור קו:</span>
                <span id="total-cost-display" style="color:var(--danger)">₪0</span>
            </div>
        </div>
        
        <button id="btn-share" class="btn-main">📍 נווט למכון בדיקה</button>
        <button id="btn-restart" class="btn-outline" style="margin-top:10px;">🔄 בדיקה חדשה</button>
    </div>

    <script type="module" src="app.js"></script>

</body>
</html>
